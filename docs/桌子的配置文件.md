
# 桌子的配置文件

桌子的配置文件是放于CatTuber桌子模型旁的用于设置特效、映射的文件。

配置文件是json格式，可以用任何文本编辑器打开。json格式并不复杂，你可以从json内容轻松推断逻辑关系，编写时可以参考文件内其他内容或其他json文件里的内容，注意不要使用中文标点、不要漏逗号或多加逗号即可（同阶元素之间有逗号，同阶最后一个元素的末尾无逗号），如有必要请使用json格式检查器。

## "Version"（必需）

告诉软件读取配置文件的方式，目前只写2。

## "AutoFade"（可选，建议使用）

需要搭配”tag“使用（见下文）。设置这个字段可以让按键的光效在手抬起之后缓慢消失。

```json
"AutoFade":
{
	"period":0.3,
	"opacity":0.38
}
```
上述内容表示，对有指定tag的按键，手松开按键后，按键的参数值会从1突变到0.38，然后经过0.3秒变为0。

## "OutputMap"（必需）
 "OutputMap"是个二维数组，第一维度是手的序号，第二个维度表示这只手上的各个映射。
 CatTuber中手的序号从角色右手开始。
 如 "OutputMap":[[A,B],[C,D]]表示右手上有A、B两个映射，左手上有C、D两个映射。

为了让读者快速上手，这里只介绍两个常用的映射示例。
### 一个键盘按钮的映射示例：
```json
{
	"input":"KeyboardInput",
	"dataType":"BYTE",
	"index":36,
	"type":"point",
	"output":[13,-6.5],
	"paramID":"CAT_KEY_J",
	"weight":1.0,
	"tag":"autoFade"
}
```
这个映射的意义是键盘上按键J按下时，桌子的ID为"CAT_KEY_J"的参数触发，并且手将按在X为13，Y为-6.5的位置。

其中的"index"的36是J键在"KeyboardInput"这个数据中的索引，可以通过此存储库中的按键查询程序查询。

"weight"表示权重，同时按下多个按键时，手实际的坐标是这几个映射中手坐标的加权平均。

"tag":"autoFade"表示这个按键适用上文中 "AutoFade"效果，如果没有这个字段，手抬起的瞬间按键的参数值就直接为0了。

### 一个鼠标范围的映射示例：
```json
{
	"input":"MousePos_AppRelated",
	"dataType":"float",
	"index":[0,1],
	"type":"area",
	"output":[[-30.0,4.8],[-22.4,3.0],[-30,-30.0],[-18.1,-30.0]],
	"paramID":["CAT_RX","CAT_RY"],
	"weight":1000.0,
	"mode":1,
	"tag":"mouse"
}
```
这个映射的意义是鼠标移动时，手和鼠标的模型的X、Y值将在左上(-30.0,4.8)、右上（-22.4,3.0）、左下（-30,-30.0）、右下（-18.1,-30.0）这四点围成的范围内运动。桌子的"CAT_RX","CAT_RY"参数值也会变化（使用鼠标时，这两个参数因为没有建模所以没用，软件后续版本中，这两个参数能用于手柄摇杆）。

# 进阶内容

下面是一些可以实现特定效果的进阶内容，这些内容在配置文件中并不是必须的。如果你对CatTuber的模型制作还没熟悉、上手，在已经成功制作并导入一个桌子模型后再来阅读这些内容也不迟。

参数特效"effects"




