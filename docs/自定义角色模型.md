
# 制作角色模型

### 立绘准备（坐绘？？？）

没有太多值得说明的地方。出于头部转动、物理的考虑，长发角色请让头发在桌子下方有足够余量；在PSD中需要包含用于对身体进行遮罩的桌子图层。

如果采用官方的模型标准，可以复制示范模型的psd文件并直接修改与角色特征有关的部件。

### 开始建模前的准备

打开Live2D Cubism Editor，将角色模型PSD文件导入编辑器中，至少对需要作为遮罩的图形网格修改网格ID（如桌子和眼白，它们的ID应该能让你直接知道来自哪个图形网格，而不应该为ArtmeshXXX）。

删除所有参数，并将存储库里的“CatTuber角色基础参数.csv”导入编辑器中。至于这些参数应该如何建模，请直接参考此库中的示例角色模型。
（图）

这些参数中的一些是计划于未来使用，而当前版本没有使用的。

对于每个参数的具体用途请直接在编辑器中打开示范模型的cmo3文件查看。

### 手部建模

同模型标准下不同模型手至少在手按下时，在相同“位置XY”参数上需要表现为按在同样的地方。

通常建议直接把同标准的手部件直接拷贝复用。如果有“角色衣服袖子过长而遮住手”、“手需要做成酷酷机械”等需要对手进行重新建模的情况，也需要把同标准的手部件直接拷贝到工程中作为建模时的位置参考。

官方的手参数中部分关键帧时为了削除违和的变形而设定，想要位置与官方的手保持一致的话，在位置X的-30、0、30；位置Y的-30、0、30组合成的9个关键点上保持位置一致即可。（即先9轴确定位置，然后插入关键点削除违和形变）

*CatTuber中抬手（手的Up参数）的动作并不是瞬间完成，而是需要数帧的时间。如果你想有流畅的抬手动作，那么建模时你也需要保证在手的各个XY位置上，Up参数在整个[0,1]范围间手的模型均无明显结构问题。如果你希望抬手动作瞬间完成，可以在Up值为0.1处插个关键点，并从Up值为1处复制形状。

### 添加更多的手

### 模型导出

请选择SDK for Native 4.0 导出。

### 表情和动画

当前版本CatTuber没有完善的表情和动画系统，主要是因为CatTuber的事件系统未开发完善。我们期望能用事件系统去控制角色的表情和动画，比如按键达到一定频率时发出一个事件，角色模型收到这个事件并触发一个急迫的表情或动画。

但是待机动画是受支持的，待机动画的组名是"Idle"，可以通过Live2D Cubism Viewer添加动画或者手动编写*.model3.json文件。

### 编写配置文件以确定休息/激活状态时手的参数

CatTuber中角色在按键频率较低时会进入休息状态，反之进入激活状态。

每个状态中，当手从按键上抬起时都会到不同的位置，这个位置需要在配置文件中指定。

配置文件名和资源包名，或者视为资源包的文件夹名一致。编写示例：

defaultCharacter.json:
```json
{
	"HandList":
	[
	[19.3,-30,0,0.8],
	[-21.1,-22.9,0,0.8]
	]
}
```
"HandList"是个二维数组，第一个维度是手的序号，第二个维度有四个数值，是该手的各个状态的目标位置。

上述defaultCharacter.json即表示defaultCharacter模型在休息状态下，右手松开按键后会慢慢移动到 右手X:19.3、右手Y:-30、右手Up:0的位置。左手松开按键后会慢慢移动到 左手X:-21.1、左手Y:-22.9、左手Up:0的位置，即手趴在桌上的动作。。数组中四个数字的最后一个数字标识在激活状态时手的高度（Up参数值）。CatTuber中激活状态抬手后的XY位置不通过配置文件指定，而是由手在哪个XY值抬起决定的。如按键时右手位置在X:-10,Y:10,Up:0的位置，在上述json文件下，抬起时右手的位置在X:-10,Y:10,Up:0.8的位置。

上述json内容也是CatTuber中使用的默认值，如果你是跟随CatTuber的官方标准且不需要改动手的各个状态的抬手位置，那么你可以不编写这个json文件。

### 导入CatTuber中

 1. 新建一个文件夹，将其命名为你的模型名（这个名字会于软件的模型选择界面显示）。
 2. 在这个文件夹中放入一张名为Cover.png的256*256的png图片。
 3. 在这个文件夹中新建一个名为l2dmodel的文件夹，在其中放入从编辑器导出的模型和动画文件，**将\*.model3.json更名为cat.model3.json**。
1.  将上述内容放到CatTuber文件夹中的Resources\Character文件夹里；
2.  在旁边放置与文件夹同名配置文件。
（图l2dmodel文件夹）
（图Cover.png）





